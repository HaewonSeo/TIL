## 1. 학습 날짜
+ 2020-11-26(목)

## 2. 학습시간
+ 12:00 ~ 18:00 (자가)   
+ 20:00 ~ 24:00 (자가)
+ 총 학습시간 : 10 시간

## 3. 학습 범위 및 주제
+ DB 트랜잭션

## 4. 동료 학습 방법

## 5. 학습 목표
+ 트랜잭션 학습
+ DB 프로젝트

## 6. 상세 학습 내용
+ 실제 코딩에 소요한 시간 : 0시간    
+ DB 강의 수강 : 2시간    

    
#### 8.3 오라클의 시스템 카탈로그   
오라클에서는 시스템 카탈로그를 데이터 사전이라고 부른다.   
   
DICTIONARY : 데이터 사전 테이블과 뷰에 관한 정보   
따라서 다른 사전이름을 모르는 경우 DICTIONARY 사전에서 찾을 수 있다.   
   
### 9. 트랜잭션   
   
#### 9.1 트랜잭션 개요   
   
- 동시성 제어   
   
- 회복   
   
- 트랜잭션   
동시성 제어와 회복을 지원하기 위해 DB는 트랜잭션을 제공한다.   
   
1 .로그를 유지   
2. 여러 SQL을 하나의 트랜잭션으로 취급   
3.commit 과 메세지출력의 순서를 정확히 해야함   
    
- 트랜잭션의 특성 : ACID   
1. 원자성(Atomicity) : all or nothing.    
2. 일관성(Consistency) : 트랜잭션은 일관된 상태의 DB를 새로운 일관된 상태의 DB로 변경된다. 트랜잭션 수행도중에는 일시적으로 불일치 상태에 있을 수 있다.   
일관성은 무결성 제약조건과 응용 프로그램에서의 논리를 유지(만족)하는 것을 말한다.    
은행에서 계좌이체의 예. 새로운 상태에서도 이전 상태와 동일한 총액을 유지하는 것   
3. 고립성(Isolation) : 독립성이라고도 함. 여러 트랜잭션이 동시에 수행되는데, 하나의 트랜잭션은 다른 트랜잭션들이 동시에 수행된다는 것에 전혀 영향을 받지 않고, 자기 혼자만 돌아가는 것과 같은 효과를 가져야 한다 것을 의미한다. 다양한 고립수준에 대해서는 뒤의 절에서 다시 이야기 할 예정임   
4. 지속성(Durability) : commit 한 이후에는 어떤일이 발생하더라도, 커밋한 트랜잭션의 내용은 데이터베이스에 항상 남아있어야 한다.    
   
- 트랜잭션의 완료(commit)   
COMMIT WORK   
   
- 트랜잭션의 철회(abort)   
ROLLBACK WORK   
   
- 트랜잭션이 성공하지 못하는 원인   
   
#### 9.2 동시성 제어 
   
- 스케쥴 : DBMS에서 트랜잭션을 수행하는 순서, 트랜잭션은 여러개의 연산들로 구성된다.   
1. 직렬스케줄 : 하나의 트랜잭션을 차례대로 수행하는 것을 말한다.   
2. 비직렬 스케줄 : 트랜잭션들이 차례대로 수행되지 않고, 섞여서 수행된다. OPERATION들이 섞여서 수행된다.   
3. 직렬가능 : 비직렬 스케줄 중에 올바르지 않는 것이 있고, 올바른 것이 있다. 비직렬 스케줄 중에서 직렬스케줄의 결과와 동등한 것을 직렬가능하다고 한다.   
   
T1 : O11,O12,O13   
T2 : O21.O22,O23,O24   
T3 : O31,O32   
   
직렬스케줄 : T1-T2-T3 or T2-T3-T2 or ...총 6개의 직렬스케쥴이 가능하다. N개의 트랜잭션이라면 N!개의 직렬 스케줄이 가능하다.   
비직렬스케줄 : O11-O21-O22-O12... -> 9!/(2!*3!*4!). 각각의 트랜잭션에서의 순서는 유지되어야 한다. 따라서 (2!*3!*4!)을 나누어주어야 한다. 비직렬스케쥴이 직렬스케줄에 비해 더많은 경우가 있다.   
   
모든 비직렬 스케줄이 유용한 스케줄인가? 그렇지 않다.   
비직렬 스케줄 중에는 올바르지 않는 것이 있고, 올바른 것이 있다. 올바른 스케줄이란? 비직렬 스케줄 중에서 직렬스케줄 중 어떤 하나의 결과와 동등한 것을 직렬가능하다고 한다.   
   
어떤 경우의 결과가 동일한가?(Equivelent하다는 것은 각각의 트랜잭션에서 write하는 그 데이터 항목들의 값들이 동등하면 된다. )   
사실 결과값만 두고 보면 어떤 특정한 값일때에 한해서 우연하게 결과값이 동일할 수도 있다. 이런 경우는 제외되어야 한다.   
정확하게 말하자면, 특정 데이터에 대해 그 데이터 항목의 연산이 수행되는 순서가 동일하다고 한다면, 직렬가능 스케줄이라고 한다.   
   
예를 들어 A,B 2개의 데이터가 있다고 한다면,   
서로 다른 스케줄로 트랜잭션을 수행했을 때, A와 B의 값의 변경된 결과가 같으면 같은 스케줄이라고 할 수 있다.   
특정 A와 B의 값에 대해서 우연하게 같은 결과를 갖는 경우는 제외하기 위해서   
(가정)   
A에 관련된 연산 -> O11. O23, O24, O31   
B에 관련된 연산 -> ~~~   
S1 : T1-T2-T3 으로 수행이 된다.   
A에 관련된 오퍼레이션들의 순서는 O11. O23, O24, O31이여야 한다는 것이다.   
그래서 어떤 스케줄이 비직렬스케줄인데 이 비직렬스케줄에서 A에 대한 순서가 O11. O23, O24, O31와 같이 나오고,   
또 B에 대한 순서가 ~~~ 와 동일하게 나온다면 그것은 서로 Equivelent하다고 한다.   
   
Q. 직렬 가능이 여러가지일 수도 있나요?   
A. 아니다. 어떤 비직렬스케줄이 하나 있는데 그것이 어떤 직렬스케줄과 같다고 한다면 1가지만 나올 수 있다. 직렬스케줄의 순서와 일치가 되야하므로.   
앞에서 이야기했듯이, 결과값이 같은 것이 직렬가능이라 한다면 우연히 같을 경우도 있기 때문에 오퍼레이션의 순서로 판단해야 한다.   
   
equivelent에는 2가지 종류가 있다.   
result equivelent : 결과값만으로 따지는 경우. 이는 우연히 같아진 경우가 있어 사용을 거의 안한다.   
complement equivelent : 오퍼레이션의 순서로 따지는 경우. 이를 이용해서 equivelent를 판단한다.   
   
- 데이터베이스 연산   
   
- 동시성 제어를 하지 않고 다수의 트랜잭션을 동시에 수행할 때 생길 수 있는 문제   
1. 갱신 손실(loss update)   
2. 오손 데이터 읽기(dirty read)   
3. 반복할 수 없는 읽기(unrepeatable read)   

## 7. 학습 내용에 대한 개인적인 총평
- 트랜잭션과 동시성 제어에 대해 학습하였다.
- DB project를 진행 중이다. report 작성 이후, 이어서 진행할 예정이다.
- 개념적 설계의 결과인 ERD를 관계릴레이션으로 사상하는 논리적 단계를 수행하였고, 크롤링을 병행하면서 초기 데이터를 확보하고 가공하고 있다.
- 이후, 초기 데이터를 db에 삽입하고, mySQL과 웹을 연동할 예정이다.
- 생각처럼 쉽지 않다.

## 8. 다음 학습 계획
+ 소프트웨어공학 학습